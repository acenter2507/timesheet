<div class="container-fluid animated fadeIn mg100b">
  <div class="row">
    <div class="col-xs-12">
      <h3 class="text-center mg5y">{{ vm.month.year + '年' + vm.month.month + '月'}}</h3>
    </div>
    <div class="col-xs-12">
      <button class="btn btn-default btn-sm" ng-click="vm.handlePreviousScreen()">
        <i class="fa fa-angle-double-left"></i> 戻る
      </button>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12">
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th class="text-center">日付</th>
              <th class="text-center">曜日</th>
              <th>業務内容</th>
              <th class="text-center">開始</th>
              <th class="text-center">終了</th>
              <th class="text-center">休憩</th>
              <th class="text-center">情報</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in vm.datas">
              <td ng-class="{'bg-danger': item.date.day() === 0, 'bg-warning': item.date.day() === 6 }" ng-bind="item.date.format('MMMM D[日]')"></td>
              <td ng-class="{'bg-danger': item.date.day() === 0, 'bg-warning': item.date.day() === 6 }" ng-bind="item.date.format('dddd')"></td>
              <!-- 未入力 -->
              <td ng-if="!item.work" colspan="5"></td>
              <!-- お休み -->
              <td ng-if="item.work && item.work.rest" colspan="5">
                <span>{{item.work.rest.holiday.name}}</span>
                <span ng-bind-html="item.work.rest.description | nl2br"></span>
              </td>
              <!-- 出勤 -->
              <td ng-if="item.work && !item.work.rest">{{item.work.content}}</td>
              <td ng-if="item.work && !item.work.rest">{{item.work.start}}</td>
              <td ng-if="item.work && !item.work.rest">{{item.work.end}}</td>
              <td ng-if="item.work && !item.work.rest">{{item.work.middleRest}}</td>
              <td ng-if="item.work && !item.work.rest">計算情報</td>
              <td>
                <a ng-if="!item.work" class="btn btn-default btn-xs" ng-click="vm.handleCreateWorkDate(item)">
                  <i class="fa fa-spinner fa-pulse fa-fw" ng-show="vm.createWorkDateBusy"></i> 入力
                </a>
                <a ng-if="item.work" class="btn btn-primary btn-xs" ng-click="vm.handleEditWorkDate(item)">編集</a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>
<script type="text/ng-template" id="timesheetInput.html">
  <h4>{{item.date | LL}}</h4>
  <form>
    <div class="form-group" ng-if="item.work.rest">
      <span>登録した休暇：</span>
      <a ui-sref="rests.view({ restId: item.work.rest._id })">{{item.work.rest.description}}</a>
    </div>
    <div class="form-group">
      <div class="col-xs-6 pdnl">
        <label for="start">開始</label>
        <timepicker ng-model="item.work.start" hour-step="1" minute-step="5" show-meridian="false"></timepicker>
      </div>
      <div class="col-xs-6">
        <label for="end">終了</label>
        <timepicker ng-model="item.work.end" hour-step="1" minute-step="5" show-meridian="false"></timepicker>
      </div>
    </div>
    <div class="form-group">
      <label for="rest">休憩時間（分）</label>
      <input class="form-control" type="number" ng-model="item.work.middleRest" step="1" min="60">
    </div>
    <div class="form-group">
      <label for="content">作業内容</label>
      <textarea name="content" class="form-control h50" ng-model="tmpWork.content" required></textarea>
    </div>
  </form>
</script>