<div class="container-fluid animated fadeIn mg100b">
  <div class="row">
    <div class="col-xs-12">
      <h3 class="text-center mg5y">{{:: vm.date | LL }} {{vm.date.format('dddd')}}</h3>
    </div>
    <div class="col-xs-12 mg5b">
      <button class="btn btn-default btn-sm" ng-click="vm.handlePreviousScreen()">
        <i class="fa fa-angle-double-left"></i> 戻る
      </button>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <div class="well">
        <h4>勤務時間入力</h4>
        <form>
          <!-- 休暇 -->
          <div class="form-group">
            <label for="content">休暇：</label>
            <div ng-if="vm.workdate.workrests.length > 0">
              <button class="btn btn-danger btn-sm" ng-click="vm.handleViewWorkrest()">休暇詳細</button>
            </div>
            <div ng-if="vm.workdate.workrests.length === 0">
              <span class="mg10r">休暇なし</span>
              <label ng-if="!vm.workdate.isHoliday"><input name="transfer" type="checkbox" ng-model="vm.workdate.transfer" ng-change="vm.handleCompensatoryOff()">振替休日</label>
            </div>
          </div>
          <!-- 作業内容 -->
          <div class="form-group">
            <label for="content">作業内容：</label>
            <textarea name="content" class="form-control h50" ng-model="vm.workdate.content"></textarea>
            <span class="text-danger" ng-show="vm.error.content.error">{{vm.error.content.message}}</span>
          </div>
          <!-- 時間 -->
          <div class="form-group">
            <div class="col-xs-6 pdnl">
              <label for="start">開始（hh:mm）</label>
              <input type="text" class="form-control" ng-model="vm.workdate.start" ng-change="vm.handleChangedInput()">
              <span class="text-danger" ng-show="vm.error.start.error">{{vm.error.start.message}}</span>
            </div>
            <div class="col-xs-6 pdnr">
              <label for="end">終了（hh:mm）</label>
              <input type="text" class="form-control" ng-model="vm.workdate.end" ng-change="vm.handleChangedInput()">
              <span class="text-danger" ng-show="vm.error.end.error">{{vm.error.end.message}}</span>
            </div>
            <div class="clearfix"></div>
          </div>
          <!-- 休憩 -->
          <div class="form-group">
            <div class="col-sm-4 pdnl">
              <label for="middleRest">休憩時間（分）</label>
              <input class="form-control" type="number" ng-model="vm.workdate.middleRest" step="10" min="0" ng-change="vm.handleChangedInput()">
              <span class="text-danger" ng-show="vm.error.middleRest.error">{{vm.error.middleRest.message}}</span>
            </div>
            <div class="col-sm-4">
              <label for="overtime">時間外（時）</label>
              <input class="form-control" ng-model="vm.workdate.overtime" disabled>
            </div>
            <div class="col-sm-4 pdnr">
              <label for="overnight">深夜（時）</label>
              <input type="text" class="form-control" ng-model="vm.workdate.overnight" disabled>
            </div>
            <div class="clearfix"></div>
          </div>
          <!-- Buttons -->
          <div class="form-group">
            <button class="btn btn-default" ng-click="vm.handleSetDefaultWorkdateInfo()">デフォルト</button>
            <button class="btn btn-warning" ng-click="vm.handleClearWorkdateInfo()">クリア</button>
            <button class="btn btn-primary" ng-click="vm.handleSaveWorkdate()" ng-disabled="vm.busy">保存</button>
          </div>
          <div class="form-group">
            <p>
              <span class="mg10r">★</span>
              <span>深夜時間は</span>
              <span>{{:: vm.Constant.overnightStart }}</span>
              <span>～</span>
              <span>{{:: vm.Constant.overnightEnd }}</span>
              <span>まで</span>
            </p>
            <p>
              <span class="mg10r">★</span>
              <span>入力する時間は30分単位で入力してください。</span>
            </p>
            <p>
              <span class="mg10r">★</span>
              <span>また日をまたがる時間の場合は00:00から加算した入力をお願いします。</span>
            </p>
          </div>
        </form>
      </div>
    </div>
    <div class="col-sm-6">
      <div class="well">
        <h4 class="mg5b">{{:: vm.workdate.workmonth.year }}年{{:: vm.workdate.workmonth.month }}月の状態</h4>
        <div class="table-responsive">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>出勤日数</th>
                <th>残業時間</th>
                <th>深夜時間</th>
                <th>休憩時間</th>
                <th>休出</th>
                <th>休深</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>{{ vm.workdate.workmonth.numWorkDate }}</td>
                <td>{{ vm.workdate.workmonth.overtime }}</td>
                <td>{{ vm.workdate.workmonth.overnight }}</td>
                <td>{{ vm.workdate.workmonth.middleRest }}</td>
                <td>0</td>
                <td>0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/ng-template" id="workrests_list.html">
  <h4>申請した休暇の一覧</h4>
  <div class="row">
    <div class="col-xs-12">
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>休暇形態</th>
              <th>理由</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="workrest in workrests">
              <td>{{ workrest.holiday.name }}</td>
              <td>{{ workrest.description }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <button class="btn btn-sm pull-right btn-danger" ng-click="closeThisDialog()">閉じる</button>
      <div class="clearfix"></div>
    </div>
  </div>
</script>


<script type="text/ng-template" id="workdates_list.html">
  <h4>出勤した休日の一覧</h4>
  <div class="row">
    <div class="col-xs-12">
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>選択</th>
              <th>日付</th>
              <th>作業内容</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="workdate in workdates">
              <td class="text-center">
                <input type="radio" ng-model="workdateId" value="{{ workdate._id }}" name="workdateId">
              </td>
              <td>
                <span>{{ workdate.workmonth.year }}</span><span>年</span>
                <span>{{ workdate.month }}</span><span>月</span>
                <span>{{ workdate.date }}</span><span>日</span>
              <td>{{ workdate.content }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <button class="btn btn-sm pull-right btn-danger" ng-click="closeThisDialog()">閉じる</button>
      <button class="btn btn-primary pull-right mg10r" ng-click="confirm(workdateId)">確認</button>
      <div class="clearfix"></div>
    </div>
  </div>
</script>